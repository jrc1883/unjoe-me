---
/**
 * Josh Comeau-style Callout Boxes
 * Usage: <Callout type="info" title="Intended Audience">Content</Callout>
 */

interface Props {
	type?: 'info' | 'warning' | 'success' | 'note' | 'historical';
	title?: string;
}

const { type = 'info', title } = Astro.props;

// Theme configuration for each callout type
const themes = {
	info: {
		bgColor: 'rgba(59, 130, 246, 0.08)',
		borderColor: 'rgba(59, 130, 246, 0.4)',
		textColor: '#3b82f6',
		icon: '‚ÑπÔ∏è',
		label: 'Info',
	},
	warning: {
		bgColor: 'rgba(251, 191, 36, 0.08)',
		borderColor: 'rgba(251, 191, 36, 0.4)',
		textColor: '#f59e0b',
		icon: '‚ö†Ô∏è',
		label: 'Warning',
	},
	success: {
		bgColor: 'rgba(34, 197, 94, 0.08)',
		borderColor: 'rgba(34, 197, 94, 0.4)',
		textColor: '#22c55e',
		icon: '‚úÖ',
		label: 'Success',
	},
	note: {
		bgColor: 'rgba(168, 85, 247, 0.08)',
		borderColor: 'rgba(168, 85, 247, 0.4)',
		textColor: '#a855f7',
		icon: 'üìù',
		label: 'Note',
	},
	historical: {
		bgColor: 'rgba(251, 146, 60, 0.08)',
		borderColor: 'rgba(251, 146, 60, 0.4)',
		textColor: '#fb923c',
		icon: 'üìú',
		label: 'Historical Context',
	},
};

const theme = themes[type];
---

<aside
	class="callout"
	style={`
		background-color: ${theme.bgColor};
		border-left: 3px solid ${theme.borderColor};
	`}
>
	<div class="callout-header" style={`color: ${theme.textColor};`}>
		<span class="callout-icon" aria-hidden="true">{theme.icon}</span>
		<strong class="callout-title">{title || theme.label}</strong>
	</div>
	<div class="callout-content">
		<slot />
	</div>
</aside>

<style>
	.callout {
		margin: 2em 0;
		padding: 1.25rem 1.5rem;
		border-radius: 8px;
		transition: all 0.2s ease;
	}

	.callout:hover {
		transform: translateX(4px);
	}

	.callout-header {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		margin-bottom: 0.75rem;
		font-size: 0.9375rem;
		font-weight: 600;
		letter-spacing: 0.01em;
	}

	.callout-icon {
		font-size: 1.25rem;
		line-height: 1;
	}

	.callout-title {
		margin: 0;
	}

	.callout-content {
		color: var(--text-secondary);
		line-height: 1.7;
	}

	/* Prose styling for content inside callouts */
	.callout-content :global(p) {
		margin-bottom: 0.75em;
	}

	.callout-content :global(p:last-child) {
		margin-bottom: 0;
	}

	.callout-content :global(a) {
		color: var(--accent);
		text-decoration: underline;
		text-decoration-color: rgba(59, 130, 246, 0.3);
		transition: text-decoration-color 0.2s ease;
	}

	.callout-content :global(a:hover) {
		text-decoration-color: var(--accent-hover);
	}

	.callout-content :global(code) {
		background-color: var(--bg-tertiary);
		padding: 0.2em 0.4em;
		border-radius: 4px;
		font-size: 0.9em;
	}

	.callout-content :global(ul),
	.callout-content :global(ol) {
		margin: 0.75em 0;
		padding-left: 1.5em;
	}

	.callout-content :global(li) {
		margin-bottom: 0.375em;
	}

	/* Responsive adjustments */
	@media (max-width: 640px) {
		.callout {
			padding: 1rem 1.25rem;
		}

		.callout-header {
			font-size: 0.875rem;
		}

		.callout-icon {
			font-size: 1.125rem;
		}
	}
</style>
