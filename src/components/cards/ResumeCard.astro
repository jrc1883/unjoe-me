---
interface Props {
  resumeUrl?: string;
}
const { resumeUrl = '/resume/Joseph_Cannon_Resume.pdf' } = Astro.props;
---

<div class="resume-card" data-expandable="true">
  <h3 class="card-label">Resume</h3>

  <div class="resume-preview">
    <!-- Stylized document preview -->
    <svg viewBox="0 0 120 160" class="doc-graphic">
      <rect x="10" y="10" width="100" height="140" rx="4" fill="#1f1f23" stroke="#3f3f46"/>
      <!-- Header lines -->
      <rect x="20" y="25" width="60" height="6" rx="2" fill="#3b82f6" opacity="0.8"/>
      <rect x="20" y="38" width="40" height="3" rx="1" fill="#4b5563"/>
      <!-- Content lines -->
      <rect x="20" y="55" width="80" height="3" rx="1" fill="#374151"/>
      <rect x="20" y="63" width="70" height="3" rx="1" fill="#374151"/>
      <rect x="20" y="71" width="75" height="3" rx="1" fill="#374151"/>
      <rect x="20" y="79" width="60" height="3" rx="1" fill="#374151"/>
      <!-- Section -->
      <rect x="20" y="95" width="50" height="4" rx="1" fill="#3b82f6" opacity="0.6"/>
      <rect x="20" y="106" width="80" height="3" rx="1" fill="#374151"/>
      <rect x="20" y="114" width="65" height="3" rx="1" fill="#374151"/>
      <rect x="20" y="122" width="72" height="3" rx="1" fill="#374151"/>
    </svg>
  </div>

  <div class="resume-actions">
    <a href={resumeUrl} target="_blank" class="view-btn">
      View PDF
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/>
        <polyline points="15 3 21 3 21 9"/>
        <line x1="10" y1="14" x2="21" y2="3"/>
      </svg>
    </a>
  </div>

  <div class="expand-content">
    <div class="resume-details">
      <p class="detail-item"><strong>Experience:</strong> 21+ years</p>
      <p class="detail-item"><strong>Current:</strong> Mars Inc.</p>
      <p class="detail-item"><strong>Credentials:</strong> MBA, PMP, LEED AP</p>
      <p class="detail-item"><strong>Clearance:</strong> TS/SCI eligible</p>
    </div>
  </div>

  <button class="expand-btn" aria-label="Expand details">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M6 9l6 6 6-6"/>
    </svg>
  </button>
</div>

<style>
  .resume-card {
    display: flex;
    flex-direction: column;
    height: 100%;
    position: relative;
  }

  .card-label {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 0.75rem 0;
  }

  .resume-preview {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem;
  }

  .doc-graphic {
    width: 80px;
    height: auto;
    filter: drop-shadow(0 4px 12px rgba(0,0,0,0.3));
  }

  .resume-actions {
    margin-top: auto;
  }

  .view-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-muted);
    text-decoration: none;
    font-size: 0.875rem;
    transition: color 0.2s ease;
  }

  .view-btn:hover {
    color: var(--accent);
  }

  .expand-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }

  .resume-details {
    padding-top: 1rem;
    border-top: 1px solid var(--border);
    margin-top: 1rem;
  }

  .detail-item {
    font-size: 0.8125rem;
    color: var(--text-secondary);
    margin: 0.25rem 0;
  }

  .expand-btn {
    position: absolute;
    bottom: 0.75rem;
    right: 0.75rem;
    background: transparent;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 0.25rem;
    transition: transform 0.3s ease;
  }

  .resume-card.expanded .expand-btn {
    transform: rotate(180deg);
  }
</style>
