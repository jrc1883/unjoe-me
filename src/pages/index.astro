---
import { getCollection } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import { SITE_TITLE, SITE_DESCRIPTION, SOCIAL_LINKS } from '../consts';

const posts = (await getCollection('blog'))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);

const interests = [
  { id: 'systems', label: 'Systems Architecture' },
  { id: 'ai', label: 'AI/ML & Agents' },
  { id: 'defense', label: 'Defense & Gov' },
  { id: 'homelab', label: 'Home Lab' },
  { id: 'leadership', label: 'Leadership' },
];

const timeline = [
  { year: '2024', title: 'AI Builder', desc: 'PopKit, OPTIMUS, Genesis' },
  { year: '2016', title: 'Mars Inc.', desc: 'Integrated Facilities Management' },
  { year: '2008', title: 'Enovity', desc: 'Building Systems Engineering' },
  { year: '2003', title: 'U.S. Navy', desc: '21+ Years Service' },
];

const projects = [
  {
    title: 'PopKit',
    desc: 'Claude Code plugin ecosystem with 30+ specialized agents for development workflows.',
    tags: ['TypeScript', 'Claude Code', 'AI Agents'],
    link: 'https://github.com/jrc1883/popkit',
  },
  {
    title: 'OPTIMUS',
    desc: 'Multi-agent orchestration system with 55+ AI agents for complex task automation.',
    tags: ['Python', 'Multi-Agent', 'Orchestration'],
    link: '#',
  },
  {
    title: 'Genesis Family OS',
    desc: 'Family management system integrating schedules, tasks, and home automation.',
    tags: ['Full Stack', 'Home Automation', 'AI'],
    link: '#',
  },
];

const stats = [
  { value: '21+', label: 'Years Navy' },
  { value: '55+', label: 'AI Agents Built' },
  { value: '$140M', label: 'Portfolio Managed' },
  { value: '200+', label: 'Personnel Led' },
];
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header />
    <main>
      <section class="hero">
        <div class="container">
          <p class="greeting">Hi, I'm Joseph,</p>
          <h1 class="headline">
            I build <span class="highlight" data-interest="systems">systems</span> that
            <span class="highlight" data-interest="ai">think</span>,
            <span class="highlight" data-interest="defense">serve</span>, and
            <span class="highlight" data-interest="leadership">scale</span>.
          </h1>
          <p class="bio">
            21+ years U.S. Navy veteran, engineering leader at Mars Inc., and builder of
            <span class="highlight" data-interest="ai">AI agent ecosystems</span>.
            I turn complex problems into <span class="highlight" data-interest="systems">elegant systems</span>.
          </p>
          <div class="interests">
            {interests.map((interest) => (
              <span class="interest-tag" data-interest-trigger={interest.id}>
                {interest.label}
              </span>
            ))}
          </div>
          <div class="hero-links">
            <a href="/about" class="btn-primary">About Me</a>
            <a href={SOCIAL_LINKS.github} target="_blank" class="btn-secondary">GitHub</a>
          </div>
        </div>
      </section>
      <section class="section stats-section">
        <div class="container">
          <div class="stats-grid">
            {stats.map((stat) => (
              <div class="stat-card">
                <span class="stat-value">{stat.value}</span>
                <span class="stat-label">{stat.label}</span>
              </div>
            ))}
          </div>
        </div>
      </section>
      <section class="section">
        <div class="container">
          <div class="section-header">
            <h2>Journey</h2>
          </div>
          <div class="timeline">
            {timeline.map((item) => (
              <div class="timeline-item">
                <span class="timeline-year">{item.year}</span>
                <div class="timeline-content">
                  <h3>{item.title}</h3>
                  <p>{item.desc}</p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>
      <section class="section">
        <div class="container">
          <div class="section-header">
            <h2>Featured Projects</h2>
            <a href="/projects" class="see-all">View all</a>
          </div>
          <div class="projects-grid">
            {projects.map((project) => (
              <a href={project.link} class="project-card">
                <h3>{project.title}</h3>
                <p>{project.desc}</p>
                <div class="project-tags">
                  {project.tags.map((tag) => (
                    <span class="tag">{tag}</span>
                  ))}
                </div>
              </a>
            ))}
          </div>
        </div>
      </section>
      <section class="section">
        <div class="container">
          <div class="section-header">
            <h2>Latest Articles</h2>
            <a href="/blog" class="see-all">View all</a>
          </div>
          <div class="articles-grid">
            {posts.length > 0 ? posts.map((post) => (
              <a href={`/blog/${post.slug}/`} class="article-card">
                <span class="article-date"><FormattedDate date={post.data.pubDate} /></span>
                <h3>{post.data.title}</h3>
                <p>{post.data.description}</p>
              </a>
            )) : (
              <div class="article-card">
                <span class="article-date">Coming soon</span>
                <h3>First Article</h3>
                <p>Stay tuned for articles about engineering, AI, and leadership.</p>
              </div>
            )}
          </div>
        </div>
      </section>
    </main>
    <Footer />
    <script>
      document.querySelectorAll('[data-interest-trigger]').forEach(trigger => {
        trigger.addEventListener('mouseenter', () => {
          const id = trigger.getAttribute('data-interest-trigger');
          document.querySelectorAll('[data-interest]').forEach(el => {
            if (el.getAttribute('data-interest') === id) {
              el.classList.add('active');
            }
          });
          trigger.classList.add('active');
        });
        trigger.addEventListener('mouseleave', () => {
          document.querySelectorAll('[data-interest], [data-interest-trigger]').forEach(el => {
            el.classList.remove('active');
          });
        });
      });
    </script>
  </body>
</html>
<style>
  body { background-color: #0a0a0b; color: #fafafa; font-family: system-ui, sans-serif; margin: 0; line-height: 1.6; }
  .container { max-width: 1000px; margin: 0 auto; padding: 0 1.5rem; }
  .hero { padding: 6rem 0 4rem; }
  .greeting { color: #71717a; font-size: 1.125rem; margin: 0 0 0.75rem; letter-spacing: 0.05em; }
  .headline { font-size: clamp(2rem, 5vw, 3rem); font-weight: 700; line-height: 1.2; margin: 0 0 1.5rem; }
  .bio { font-size: 1.125rem; color: #a1a1aa; margin: 0 0 2rem; max-width: 650px; line-height: 1.7; }
  .highlight { color: #fafafa; transition: all 0.3s ease; padding: 0 2px; border-radius: 4px; }
  .highlight.active { color: #3b82f6; background: rgba(59, 130, 246, 0.1); }
  .interests { display: flex; flex-wrap: wrap; gap: 0.75rem; margin-bottom: 2rem; }
  .interest-tag { background: #18181b; border: 1px solid #27272a; padding: 0.5rem 1rem; border-radius: 9999px; font-size: 0.875rem; color: #a1a1aa; cursor: pointer; transition: all 0.3s ease; }
  .interest-tag:hover, .interest-tag.active { border-color: #3b82f6; color: #3b82f6; background: rgba(59, 130, 246, 0.1); }
  .hero-links { display: flex; gap: 1rem; }
  .btn-primary { background: #3b82f6; color: white; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 500; transition: background 0.2s; }
  .btn-primary:hover { background: #2563eb; }
  .btn-secondary { background: #18181b; color: #fafafa; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none; border: 1px solid #27272a; transition: all 0.2s; }
  .btn-secondary:hover { background: #27272a; border-color: #3f3f46; }
  .stats-section { padding: 2rem 0; }
  .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; }
  .stat-card { background: #18181b; border: 1px solid #27272a; border-radius: 12px; padding: 1.5rem; text-align: center; }
  .stat-value { display: block; font-size: 2rem; font-weight: 700; color: #3b82f6; margin-bottom: 0.25rem; }
  .stat-label { font-size: 0.875rem; color: #71717a; }
  .section { padding: 3rem 0; }
  .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }
  .section-header h2 { font-size: 1.5rem; margin: 0; }
  .see-all { color: #71717a; font-size: 0.875rem; text-decoration: none; }
  .see-all:hover { color: #fafafa; }
  .timeline { display: flex; flex-direction: column; gap: 1rem; }
  .timeline-item { display: flex; gap: 1.5rem; align-items: flex-start; padding: 1rem; background: #18181b; border: 1px solid #27272a; border-radius: 12px; transition: all 0.2s; }
  .timeline-item:hover { border-color: #3f3f46; background: #1f1f23; }
  .timeline-year { font-size: 0.875rem; font-weight: 600; color: #3b82f6; min-width: 50px; padding-top: 2px; }
  .timeline-content h3 { font-size: 1rem; margin: 0 0 0.25rem; color: #fafafa; }
  .timeline-content p { font-size: 0.875rem; color: #71717a; margin: 0; }
  .projects-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem; }
  .project-card { background: #18181b; border: 1px solid #27272a; border-radius: 12px; padding: 1.5rem; text-decoration: none; color: inherit; display: block; transition: all 0.3s; }
  .project-card:hover { background: #1f1f23; border-color: #3f3f46; transform: translateY(-2px); }
  .project-card h3 { font-size: 1.25rem; margin: 0 0 0.5rem; color: #fafafa; }
  .project-card p { color: #a1a1aa; margin: 0 0 1rem; font-size: 0.9375rem; }
  .project-tags { display: flex; flex-wrap: wrap; gap: 0.5rem; }
  .tag { background: #27272a; color: #a1a1aa; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; }
  .articles-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1rem; }
  .article-card { background: #18181b; border: 1px solid #27272a; border-radius: 12px; padding: 1.5rem; text-decoration: none; color: inherit; display: block; transition: all 0.3s; }
  .article-card:hover { background: #1f1f23; border-color: #3f3f46; transform: translateY(-2px); }
  .article-card h3 { font-size: 1.125rem; margin: 0 0 0.5rem; color: #fafafa; }
  .article-card p { color: #a1a1aa; margin: 0; font-size: 0.9375rem; }
  .article-date { color: #71717a; font-size: 0.875rem; display: block; margin-bottom: 0.5rem; }
  @media (max-width: 768px) { .hero { padding: 4rem 0 3rem; } .stats-grid { grid-template-columns: repeat(2, 1fr); } .projects-grid, .articles-grid { grid-template-columns: 1fr; } .timeline-item { flex-direction: column; gap: 0.5rem; } .timeline-year { min-width: auto; } }
</style>
